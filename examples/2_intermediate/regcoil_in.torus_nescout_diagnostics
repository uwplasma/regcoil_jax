! Intermediate example: compute REGCOIL diagnostics for a current potential saved by NESCOIL
! (REGCOIL general_option=2, reading a nescout file).
!
! Run:
!   regcoil_jax --platform cpu --verbose examples/2_intermediate/regcoil_in.torus_nescout_diagnostics
!
! Optional figures/VTK (including coil cutting) via the shared postprocess script:
!   python examples/3_advanced/postprocess_make_figures_and_vtk.py --run --input examples/2_intermediate/regcoil_in.torus_nescout_diagnostics

&regcoil_nml
  general_option = 2
  nescout_filename = "nescout.torus_synthetic"

  ! In general_option=2, nlambda is overwritten with the number of Phi(m,n) blocks
  ! found in the nescout file.
  nlambda = 4
  lambda_min = 1e-18
  lambda_max = 1e-8

  ntheta_plasma = 36
  nzeta_plasma  = 36
  ntheta_coil   = 36
  nzeta_coil    = 36

  mpol_potential = 3
  ntor_potential = 2

  geometry_option_plasma = 1
  R0_plasma = 3.0
  a_plasma = 1.0
  nfp_imposed = 1

  geometry_option_coil = 1
  R0_coil = 3.0
  a_coil = 1.7

  net_poloidal_current_amperes = 1.4
  net_toroidal_current_amperes = 0.3

  symmetry_option = 1
  regularization_term_option = "chi2_K"
/

